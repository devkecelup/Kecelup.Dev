<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Code Quest - Quiz</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <style>
    :root {
      --game-primary: #6C5CE7;
      --game-secondary: #A8A5E6;
      --game-success: #00B894;
      --game-danger: #D63031;
    }
    body {
      background: linear-gradient(135deg, #1a1a2e, #16213e);
      color: white;
      font-family: 'Press Start 2P', cursive;
      margin: 0;
      padding: 0;
    }
    /* Header Kuis */
    .question-header {
      background: rgba(0,0,0,0.7);
      padding: 1rem;
      border-radius: 15px;
      margin-bottom: 2rem;
      text-align: center;
      border: 2px solid var(--game-primary);
    }
    .category-badge {
      font-size: 1.2rem;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      background: var(--game-primary);
      display: inline-block;
      margin-bottom: 1rem;
    }
    .progress-bar {
      height: 15px;
      border-radius: 10px;
      background: rgba(255,255,255,0.1);
      margin: 0 auto;
      width: 80%;
    }
    .progress {
      height: 100%;
      background: var(--game-primary);
      transition: width 0.5s ease;
    }
    /* Lives & Extra Life */
    #livesContainer, #extraLifeContainer {
      position: fixed;
      top: 20px;
      left: 20px;
      z-index: 1000;
    }
    #extraLifeContainer {
      top: 70px;
    }
    #extraLifeBtn {
      background: var(--game-secondary);
      border: 2px solid var(--game-primary);
      padding: 0.5rem 1rem;
      border-radius: 10px;
      cursor: pointer;
      font-size: 0.8rem;
      color: white;
    }
    /* Container Kuis */
    .game-container {
      max-width: 800px;
      margin: 120px auto 2rem auto;
      padding: 2rem;
      background: rgba(0,0,0,0.7);
      border-radius: 20px;
      border: 3px solid var(--game-primary);
      position: relative;
      overflow: hidden;
    }
    .question-box {
      background: rgba(255,255,255,0.1);
      padding: 2rem;
      border-radius: 15px;
      margin-bottom: 2rem;
      border: 2px solid var(--game-primary);
    }
    .option-btn {
      width: 100%;
      margin: 0.5rem 0;
      padding: 1rem;
      background: rgba(255,255,255,0.1);
      border: 2px solid var(--game-primary);
      color: white;
      text-align: left;
      border-radius: 10px;
      transition: all 0.3s ease;
      cursor: pointer;
    }
    .option-btn:hover {
      background: var(--game-primary);
      transform: translateX(10px);
    }
    /* Streak Counter */
    .streak-counter {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: rgba(0,0,0,0.7);
      padding: 1rem;
      border-radius: 15px;
      border: 2px solid var(--game-success);
      z-index: 1000;
    }
    /* Ikon Share */
    .share-icon {
      position: fixed;
      top: 20px;
      right: 20px;
      font-size: 1.5rem;
      cursor: pointer;
      color: white;
      z-index: 1000;
    }
    /* Animasi Bonus (Flame) untuk streak kelipatan 5 */
    @keyframes flameAnimation {
      0% { transform: scale(0.8); opacity: 0.8; }
      50% { transform: scale(1.2); opacity: 1; }
      100% { transform: scale(0.8); opacity: 0.8; }
    }
    .flame {
      width: 100px;
      height: 150px;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 2000;
      animation: flameAnimation 1s infinite;
    }
  </style>
</head>
<body>
  <!-- Header Kuis -->
  <div class="question-header">
    <div class="category-badge" id="categoryBadge">
      <i class="fas fa-code"></i>
      <span id="categoryName">Pemrograman</span>
    </div>
    <div class="progress-bar">
      <div class="progress" style="width: 0%"></div>
    </div>
  </div>

  <!-- Lives & Extra Life -->
  <div id="livesContainer"></div>
  <div id="extraLifeContainer">
    <button id="extraLifeBtn" onclick="getExtraLife()"> 
      <i class="fab fa-instagram"></i> Follow untuk +1 Nyawa
    </button>
  </div>

  <!-- Container Kuis -->
  <div class="container game-container">
    <div class="question-box" id="questionBox">
      <!-- Pertanyaan dimuat secara dinamis -->
    </div>
  </div>

  <!-- Streak Counter -->
  <div class="streak-counter">
    <i class="fas fa-fire" style="color: orange;"></i>
    <span id="streakCount">0</span> COMBO
  </div>

  <!-- Ikon Share -->
  <i class="fas fa-share share-icon" onclick="location.href='share.html'"></i>

  <!-- Audio -->
  <audio id="correctSound" src="https://www.soundjay.com/buttons/sounds/button-3.mp3"></audio>
  <audio id="wrongSound" src="https://www.soundjay.com/buttons/sounds/button-10.mp3"></audio>

  <script>
    // Kategori default "programming" jika localStorage kosong
    const selectedCategory = localStorage.getItem('selectedCategory') || "programming";

    // 40 soal (HTML, CSS, PHP) - 4 opsi tiap soal, tag HTML di-escape
    const categories = {
      programming: {
        name: "Pemrograman",
        icon: "fa-code",
        questions: [
          // ============== 15 Soal HTML (4 opsi) ==============
          {
            soal: "Apa kepanjangan dari HTML?",
            pilihan: [
              "HyperText Markup Language",
              "HighText Machine Language",
              "Hyperlink and Text Markup Language",
              "Home Tool Markup Language"
            ],
            jawaban: "A"
          },
          {
            soal: "Tag HTML untuk membuat paragraf adalah:",
            pilihan: ["&lt;div&gt;", "&lt;span&gt;", "&lt;p&gt;", "&lt;para&gt;"],
            jawaban: "C"
          },
          {
            soal: "Manakah tag HTML yang digunakan untuk membuat tautan?",
            pilihan: ["&lt;link&gt;", "&lt;a&gt;", "&lt;href&gt;", "&lt;nav&gt;"],
            jawaban: "B"
          },
          {
            soal: "Fungsi dari tag head dalam HTML adalah:",
            pilihan: [
              "Menampilkan konten halaman",
              "Menyimpan metadata dan link ke resources",
              "Menyimpan script saja",
              "Menyimpan gambar saja"
            ],
            jawaban: "B"
          },
          {
            soal: "Tag apa yang digunakan untuk memasukkan gambar?",
            pilihan: ["&lt;img&gt;", "&lt;picture&gt;", "&lt;image&gt;", "&lt;src&gt;"],
            jawaban: "A"
          },
          {
            soal: "Atribut apa yang wajib ada dalam tag img?",
            pilihan: ["alt", "src", "title", "href"],
            jawaban: "B"
          },
          {
            soal: "Tag HTML untuk membuat daftar terurut adalah:",
            pilihan: ["&lt;ul&gt;", "&lt;ol&gt;", "&lt;dl&gt;", "&lt;list&gt;"],
            jawaban: "B"
          },
          {
            soal: "Tag HTML untuk membuat daftar tidak terurut adalah:",
            pilihan: ["&lt;ol&gt;", "&lt;ul&gt;", "&lt;dl&gt;", "&lt;list&gt;"],
            jawaban: "B"
          },
          {
            soal: "Bagaimana cara membuat tabel di HTML?",
            pilihan: ["&lt;table&gt;", "&lt;grid&gt;", "&lt;div&gt;", "&lt;form&gt;"],
            jawaban: "A"
          },
          {
            soal: "Tag HTML untuk menandai heading level 1 adalah:",
            pilihan: ["&lt;h1&gt;", "&lt;header&gt;", "&lt;title&gt;", "&lt;h6&gt;"],
            jawaban: "A"
          },
          {
            soal: "Tag HTML apa yang digunakan untuk menyisipkan video?",
            pilihan: ["&lt;video&gt;", "&lt;clip&gt;", "&lt;source&gt;", "&lt;media&gt;"],
            jawaban: "A"
          },
          {
            soal: "Atribut mana yang digunakan untuk mengatur ukuran video di tag video?",
            pilihan: ["width", "size", "length", "dimension"],
            jawaban: "A"
          },
          {
            soal: "Tag HTML apa yang digunakan untuk menyisipkan audio?",
            pilihan: ["&lt;audio&gt;", "&lt;sound&gt;", "&lt;music&gt;", "&lt;track&gt;"],
            jawaban: "A"
          },
          {
            soal: "Atribut mana yang digunakan untuk menentukan sumber file pada tag audio?",
            pilihan: ["src", "file", "href", "data"],
            jawaban: "A"
          },
          {
            soal: "Tag HTML apa yang digunakan untuk membuat hyperlink yang membuka di jendela baru?",
            pilihan: [
              "&lt;a target='_blank'&gt;",
              "&lt;link target='_new'&gt;",
              "&lt;a new&gt;",
              "&lt;button&gt;"
            ],
            jawaban: "A"
          },

          // ============== 10 Soal CSS (4 opsi) ==============
          {
            soal: "Apa fungsi CSS dalam web development?",
            pilihan: [
              "Mengatur struktur halaman",
              "Mengatur tampilan visual halaman",
              "Menyimpan data",
              "Memproses logika server"
            ],
            jawaban: "B"
          },
          {
            soal: "Properti CSS yang digunakan untuk mengubah warna latar belakang adalah:",
            pilihan: ["color", "background-color", "font-color", "bg-color"],
            jawaban: "B"
          },
          {
            soal: "Bagaimana cara menyisipkan komentar dalam kode CSS?",
            pilihan: ["// Komentar", "/* Komentar */", "&lt;!-- Komentar --&gt;", "# Komentar"],
            jawaban: "B"
          },
          {
            soal: "Properti CSS untuk mengubah ukuran font adalah:",
            pilihan: ["font-size", "text-size", "size", "font-style"],
            jawaban: "A"
          },
          {
            soal: "Apa fungsi properti margin dalam CSS?",
            pilihan: [
              "Memberikan jarak di dalam elemen",
              "Memberikan jarak di luar elemen",
              "Mengubah warna elemen",
              "Menentukan ukuran elemen"
            ],
            jawaban: "B"
          },
          {
            soal: "Apa fungsi properti padding dalam CSS?",
            pilihan: [
              "Memberikan jarak di dalam elemen",
              "Memberikan jarak di luar elemen",
              "Mengubah warna latar belakang",
              "Menentukan batas elemen"
            ],
            jawaban: "A"
          },
          {
            soal: "Bagaimana cara mengubah warna teks dalam CSS?",
            pilihan: ["text-color", "color", "font-color", "background-color"],
            jawaban: "B"
          },
          {
            soal: "Properti CSS apa yang digunakan untuk mengubah jenis font?",
            pilihan: ["font-weight", "font-style", "font-family", "text-transform"],
            jawaban: "C"
          },
          {
            soal: "Apa itu selector dalam CSS?",
            pilihan: [
              "Pola untuk memilih elemen HTML",
              "Fungsi JavaScript",
              "Properti CSS",
              "Metode HTML"
            ],
            jawaban: "A"
          },
          {
            soal: "Bagaimana cara membuat elemen tampil sebagai blok di CSS?",
            pilihan: [
              "display: inline",
              "display: block",
              "display: none",
              "visibility: hidden"
            ],
            jawaban: "B"
          },

          // ============== 15 Soal PHP (4 opsi) ==============
          {
            soal: "Apa kepanjangan dari PHP?",
            pilihan: [
              "Personal Hypertext Processor",
              "PHP Hypertext Preprocessor",
              "Public Home Page",
              "Private Home Page"
            ],
            jawaban: "B"
          },
          {
            soal: "Bagaimana cara mencetak 'Hello World' dalam PHP?",
            pilihan: [
              "echo 'Hello World';",
              "console.log('Hello World');",
              "document.write('Hello World');",
              "alert('Hello World');"
            ],
            jawaban: "A"
          },
          {
            soal: "Dalam PHP, variabel diawali dengan karakter:",
            pilihan: ["$", "%", "&", "#"],
            jawaban: "A"
          },
          {
            soal: "Fungsi apa yang digunakan untuk menyertakan file dalam PHP?",
            pilihan: ["include", "import", "require_once", "attach"],
            jawaban: "A"
          },
          {
            soal: "Bagaimana cara mendapatkan data dari form menggunakan method POST di PHP?",
            pilihan: ["$_GET", "$_POST", "$_REQUEST", "$_FORM"],
            jawaban: "B"
          },
          {
            soal: "Fungsi untuk menghitung jumlah elemen dalam array di PHP adalah:",
            pilihan: ["size()", "length()", "count()", "sum()"],
            jawaban: "C"
          },
          {
            soal: "Apa itu PHP session?",
            pilihan: [
              "Mekanisme untuk menyimpan data pengguna di server",
              "Fungsi untuk memproses data form",
              "Metode untuk mengirim email",
              "Cara menyimpan data ke database"
            ],
            jawaban: "A"
          },
          {
            soal: "Fungsi untuk mengubah string menjadi huruf kecil di PHP adalah:",
            pilihan: ["strtoupper()", "strtolower()", "lower()", "toLowerCase()"],
            jawaban: "B"
          },
          {
            soal: "Bagaimana cara memulai session di PHP?",
            pilihan: ["session_start()", "start_session()", "init_session()", "begin_session()"],
            jawaban: "A"
          },
          {
            soal: "Apa perbedaan antara include dan require di PHP?",
            pilihan: [
              "Tidak ada perbedaan",
              "require menghentikan eksekusi jika file tidak ditemukan",
              "include lebih cepat dari require",
              "include menghentikan eksekusi jika file tidak ditemukan"
            ],
            jawaban: "B"
          },
          {
            soal: "Ekstensi file default untuk script PHP adalah:",
            pilihan: [".php", ".html", ".js", ".cpp"],
            jawaban: "A"
          },
          {
            soal: "Manakah dari berikut yang digunakan untuk menampilkan output di PHP?",
            pilihan: ["echo", "console.log", "alert", "scanf"],
            jawaban: "A"
          },
          {
            soal: "Bagaimana cara membuat komentar satu baris di PHP?",
            pilihan: ["// Komentar", "/* Komentar */", "# Komentar", "&lt;!-- Komentar --&gt;"],
            jawaban: "A"
          },
          {
            soal: "Bagaimana cara mendefinisikan konstanta di PHP?",
            pilihan: ["define()", "const", "var", "static"],
            jawaban: "A"
          },
          {
            soal: "Apa yang akan dicetak oleh perintah 'echo 2+3;' di PHP?",
            pilihan: ["2+3", "5", "error", "2 3"],
            jawaban: "B"
          }
        ] 
  bahasa: {
    name: "Bahasa Indonesia",
    icon: "fa-book",
    questions: [
      {
        soal: "Apa yang dimaksud dengan tema dalam puisi?",
        pilihan: ["Gagasan utama yang ingin disampaikan penyair", "Jenis puisi yang ditulis", "Struktur fisik puisi", "Rima dan irama puisi", "Alat musik yang digunakan"],
        jawaban: "A"
      },
      {
        soal: "Manakah yang termasuk unsur intrinsik puisi?",
        pilihan: ["Tema", "Latar belakang penyair", "Sejarah puisi", "Penerbit puisi", "Tanggal penulisan"],
        jawaban: "A"
      },
      {
        soal: "Apa yang dimaksud dengan diksi dalam puisi?",
        pilihan: ["Pemilihan kata", "Struktur puisi", "Tema puisi", "Rima puisi", "Alat musik pengiring"],
        jawaban: "A"
      },
      {
        soal: "Apa tujuan musikalisasi puisi?",
        pilihan: ["Menyampaikan pesan puisi dengan lebih menarik", "Mengubah puisi menjadi prosa", "Menghilangkan makna puisi", "Membuat puisi lebih sulit dipahami", "Menghapus unsur intrinsik puisi"],
        jawaban: "A"
      },
      {
        soal: "Manakah yang termasuk unsur ekstrinsik puisi?",
        pilihan: ["Latar belakang penyair", "Tema puisi", "Diksi puisi", "Rima puisi", "Struktur puisi"],
        jawaban: "A"
      },
      {
        soal: "Apa yang dimaksud dengan rima dalam puisi?",
        pilihan: ["Pengulangan bunyi", "Tema puisi", "Struktur puisi", "Diksi puisi", "Alat musik pengiring"],
        jawaban: "A"
      },
      {
        soal: "Apa yang dimaksud dengan majas dalam puisi?",
        pilihan: ["Gaya bahasa yang digunakan penyair", "Struktur fisik puisi", "Tema puisi", "Rima puisi", "Alat musik pengiring"],
        jawaban: "A"
      },
      {
        soal: "Manakah yang termasuk jenis puisi berdasarkan bentuknya?",
        pilihan: ["Puisi bebas", "Puisi lama", "Puisi modern", "Puisi kontemporer", "Semua benar"],
        jawaban: "E"
      },
      {
        soal: "Apa yang dimaksud dengan puisi naratif?",
        pilihan: ["Puisi yang menceritakan suatu kisah", "Puisi yang hanya berisi perasaan", "Puisi tanpa tema", "Puisi tanpa rima", "Puisi tanpa diksi"],
        jawaban: "A"
      },
      {
        soal: "Apa yang dimaksud dengan puisi lirik?",
        pilihan: ["Puisi yang mengekspresikan perasaan", "Puisi yang menceritakan kisah", "Puisi tanpa tema", "Puisi tanpa rima", "Puisi tanpa diksi"],
        jawaban: "A"
      },
      {
        soal: "Apa yang dimaksud dengan puisi epik?",
        pilihan: ["Puisi yang menceritakan kisah kepahlawanan", "Puisi yang mengekspresikan perasaan", "Puisi tanpa tema", "Puisi tanpa rima", "Puisi tanpa diksi"],
        jawaban: "A"
      },
      {
        soal: "Apa yang dimaksud dengan puisi dramatik?",
        pilihan: ["Puisi yang mengandung dialog", "Puisi yang mengekspresikan perasaan", "Puisi tanpa tema", "Puisi tanpa rima", "Puisi tanpa diksi"],
        jawaban: "A"
      },
      {
        soal: "Apa yang dimaksud dengan puisi kontemporer?",
        pilihan: ["Puisi yang tidak terikat aturan", "Puisi yang selalu menggunakan rima", "Puisi yang selalu menceritakan kisah", "Puisi yang selalu menggunakan diksi kuno", "Puisi yang selalu menggunakan tema tertentu"],
        jawaban: "A"
      },
      {
        soal: "Apa yang dimaksud dengan puisi konvensional?",
        pilihan: ["Puisi yang terikat aturan", "Puisi yang tidak terikat aturan", "Puisi yang selalu menceritakan kisah", "Puisi yang selalu menggunakan diksi kuno", "Puisi yang selalu menggunakan tema tertentu"],
        jawaban: "A"
      },
      {
        soal: "Apa yang dimaksud dengan puisi modern?",
        pilihan: ["Puisi yang berkembang pada abad ke-20", "Puisi yang selalu menggunakan rima", "Puisi yang selalu menceritakan kisah", "Puisi yang selalu menggunakan diksi kuno", "Puisi yang selalu menggunakan tema tertentu"],
        jawaban: "A"
      },
      {
        soal: "Apa yang dimaksud dengan puisi lama?",
        pilihan: ["Puisi yang berkembang sebelum abad ke-20", "Puisi yang tidak terikat aturan", "Puisi yang selalu menceritakan kisah", "Puisi yang selalu menggunakan diksi kuno", "Puisi yang selalu menggunakan tema tertentu"],
        jawaban: "A"
      },
      {
        soal: "Apa yang dimaksud dengan puisi bebas?",
        pilihan: ["Puisi yang tidak terikat aturan", "Puisi yang selalu menggunakan rima", "Puisi yang selalu menceritakan kisah", "Puisi yang selalu menggunakan diksi kuno", "Puisi yang selalu menggunakan tema tertentu"],
        jawaban: "A"
      },
      {
        soal: "Apa yang dimaksud dengan puisi terikat?",
        pilihan: ["Puisi yang terikat aturan", "Puisi yang tidak terikat aturan", "Puisi yang selalu menceritakan kisah", "Puisi yang selalu menggunakan diksi kuno", "Puisi yang selalu menggunakan tema tertentu"],
        jawaban: "A"
      },
      {
        soal: "Apa yang dimaksud dengan puisi prosa?",
        pilihan: ["Puisi yang berbentuk prosa", "Puisi yang selalu menggunakan rima", "Puisi yang selalu menceritakan kisah", "Puisi yang selalu menggunakan diksi kuno", "Puisi yang selalu menggunakan tema tertentu"],
        jawaban: "A"
      },
      {
        soal: "Apa yang dimaksud dengan puisi mantra?",
        pilihan: ["Puisi yang digunakan untuk mantra", "Puisi yang selalu menggunakan rima", "Puisi yang selalu menceritakan kisah", "Puisi yang selalu menggunakan diksi kuno", "Puisi yang selalu menggunakan tema tertentu"],
        jawaban: "A"
      },
      {
        soal: "Apa yang dimaksud dengan puisi pantun?",
        pilihan: ["Puisi yang terdiri dari sampiran dan isi", "Puisi yang selalu menggunakan rima", "Puisi yang selalu menceritakan kisah", "Puisi yang selalu menggunakan diksi kuno", "Puisi yang selalu menggunakan tema tertentu"],
        jawaban: "A"
      },
      {
        soal: "Apa yang dimaksud dengan puisi syair?",
        pilihan: ["Puisi yang terdiri dari empat baris", "Puisi yang selalu menggunakan rima", "Puisi yang selalu menceritakan kisah", "Puisi yang selalu menggunakan diksi kuno", "Puisi yang selalu menggunakan tema tertentu"],
        jawaban: "A"
      },
      {
        soal: "Apa yang dimaksud dengan puisi gurindam?",
        pilihan: ["Puisi yang terdiri dari dua baris", "Puisi yang selalu menggunakan rima", "Puisi yang selalu menceritakan kisah", "Puisi yang selalu menggunakan diksi kuno", "Puisi yang selalu menggunakan tema tertentu"],
        jawaban: "A"
      },
      {
        soal: "Apa yang dimaksud dengan puisi karmina?",
        pilihan: ["Puisi yang terdiri dari dua baris", "Puisi yang selalu menggunakan rima", "Puisi yang selalu menceritakan kisah", "Puisi yang selalu menggunakan diksi kuno", "Puisi yang selalu menggunakan tema tertentu"],
        jawaban: "A"
      },
      {
        soal: "Apa yang dimaksud dengan puisi seloka?",
        pilihan: ["Puisi yang terdiri dari empat baris", "Puisi yang selalu menggunakan rima", "Puisi yang selalu menceritakan kisah", "Puisi yang selalu menggunakan diksi kuno", "Puisi yang selalu menggunakan tema tertentu"],
        jawaban: "A"
      },
      {
        soal: "Apa yang dimaksud dengan puisi talibun?",
        pilihan: ["Puisi yang terdiri dari enam baris", "Puisi yang selalu menggunakan rima", "Puisi yang selalu menceritakan kisah", "Puisi yang selalu menggunakan diksi kuno", "Puisi yang selalu menggunakan tema tertentu"],
        jawaban: "A"
      },
      {
        soal: "Apa yang dimaksud dengan puisi mantra?",
        pilihan: ["Puisi yang digunakan untuk mantra", "Puisi yang selalu menggunakan rima", "Puisi yang selalu menceritakan kisah", "Puisi yang selalu menggunakan diksi kuno", "Puisi yang selalu menggunakan tema tertentu"],
        jawaban: "A"
      },
      {
        soal: "Apa yang dimaksud dengan puisi pantun?",
        pilihan: ["Puisi yang terdiri dari sampiran dan isi", "Puisi yang selalu menggunakan rima", "Puisi yang selalu menceritakan kisah", "Puisi yang selalu menggunakan diksi kuno", "Puisi yang selalu menggunakan tema tertentu"],
        jawaban: "A"
      },
      {
        soal: "Apa yang dimaksud dengan puisi syair?",
        pilihan: ["Puisi yang terdiri dari empat baris", "Puisi yang selalu menggunakan rima", "Puisi yang selalu menceritakan kisah", "Puisi yang selalu menggunakan diksi kuno", "Puisi yang selalu menggunakan tema tertentu"],
        jawaban: "A"
      },
      {
        soal: "Apa yang dimaksud dengan puisi gurindam?",
        pilihan: ["Puisi yang terdiri dari dua baris", "Puisi yang selalu menggunakan rima", "Puisi yang selalu menceritakan kisah", "Puisi yang selalu menggunakan diksi kuno", "Puisi yang selalu menggunakan tema tertentu"],
        jawaban: "A"
      },
      {
        soal: "Apa yang dimaksud dengan puisi karmina?",
        pilihan: ["Puisi yang terdiri dari dua baris", "Puisi yang selalu menggunakan rima", "Puisi yang selalu menceritakan kisah", "Puisi yang selalu menggunakan diksi kuno", "Puisi yang selalu menggunakan tema tertentu"],
        jawaban: "A"
      },
      {
        soal: "Apa yang dimaksud dengan puisi seloka?",
        pilihan: ["Puisi yang terdiri dari empat baris", "Puisi yang selalu menggunakan rima", "Puisi yang selalu menceritakan kisah", "Puisi yang selalu menggunakan diksi kuno", "Puisi yang selalu menggunakan tema tertentu"],
        jawaban: "A"
      },
      {
        soal: "Apa yang dimaksud dengan puisi talibun?",
        pilihan: ["Puisi yang terdiri dari enam baris", "Puisi yang selalu menggunakan rima", "Puisi yang selalu menceritakan kisah", "Puisi yang selalu menggunakan diksi kuno", "Puisi yang selalu menggunakan tema tertentu"],
        jawaban: "A"
      },
      {
        soal: "Apa yang dimaksud dengan puisi mantra?",
        pilihan: ["Puisi yang digunakan untuk mantra", "Puisi yang selalu menggunakan rima", "Puisi yang selalu menceritakan kisah", "Puisi yang selalu menggunakan diksi kuno", "Puisi yang selalu menggunakan tema tertentu"],
        jawaban: "A"
      },
      {
        soal: "Apa yang dimaksud dengan puisi pantun?",
        pilihan: ["Puisi yang terdiri dari sampiran dan isi", "Puisi yang selalu menggunakan rima", "Puisi yang selalu menceritakan kisah", "Puisi yang selalu menggunakan diksi kuno", "Puisi yang selalu menggunakan tema tertentu"],
        jawaban: "A"
      },
      {
        soal: "Apa yang dimaksud dengan puisi syair?",
        pilihan: ["Puisi yang terdiri dari empat baris", "Puisi yang selalu menggunakan rima", "Puisi yang selalu menceritakan kisah", "Puisi yang selalu menggunakan diksi kuno", "Puisi yang selalu menggunakan tema tertentu"],
        jawaban: "A"
      },
      {
        soal: "Apa yang dimaksud dengan puisi gurindam?",
        pilihan: ["Puisi yang terdiri dari dua baris", "Puisi yang selalu menggunakan rima", "Puisi yang selalu menceritakan kisah", "Puisi yang selalu menggunakan diksi kuno", "Puisi yang selalu menggunakan tema tertentu"],
        jawaban: "A"
      },
      {
        soal: "Apa yang dimaksud dengan puisi karmina?",
        pilihan: ["Puisi yang terdiri dari dua baris", "Puisi yang selalu menggunakan rima", "Puisi yang selalu menceritakan kisah", "Puisi yang selalu menggunakan diksi kuno", "Puisi yang selalu menggunakan tema tertentu"],
        jawaban: "A"
      },
      {
        soal: "Apa yang dimaksud dengan puisi seloka?",
        pilihan: ["Puisi yang terdiri dari empat baris", "Puisi yang selalu menggunakan rima", "Puisi yang selalu menceritakan kisah", "Puisi yang selalu menggunakan diksi kuno", "Puisi yang selalu menggunakan tema tertentu"],
        jawaban: "A"
      },
      {
        soal: "Apa yang dimaksud dengan puisi talibun?",
        pilihan: ["Puisi yang terdiri dari enam baris", "Puisi yang selalu menggunakan rima", "Puisi yang selalu menceritakan kisah", "Puisi yang selalu menggunakan diksi kuno", "Puisi yang selalu menggunakan tema tertentu"],
        jawaban: "A"
      }
    ]
  }
};
      }
    };

    // Pilih data soal sesuai kategori
    const categoryData = categories[selectedCategory];
    document.getElementById('categoryName').textContent = categoryData.name;
    document.querySelector('#categoryBadge i').className = `fas ${categoryData.icon}`;

    let questions = categoryData.questions;
    let currentQuestion = 0;
    let score = 0;
    let streak = 0;
    let lives = 4;
    let extraLifeClaimed = false;
    const results = [];

    function updateProgress() {
      const progressPercent = (currentQuestion / questions.length) * 100;
      document.querySelector('.progress').style.width = `${progressPercent}%`;
    }

    function updateLivesDisplay() {
      const display = document.getElementById('livesContainer');
      let heartsHTML = "";
      for (let i = 0; i < lives; i++) {
        heartsHTML += '<i class="fas fa-heart" style="color: red; margin-right: 5px;"></i>';
      }
      display.innerHTML = heartsHTML;
      if (lives === 1 && !extraLifeClaimed) {
        document.getElementById('extraLifeContainer').style.display = 'block';
      } else {
        document.getElementById('extraLifeContainer').style.display = 'none';
      }
    }

    function updateStreak() {
      document.getElementById('streakCount').textContent = streak;
    }

    // Animasi flame setiap 5 streak
    function showStreakBonus() {
      const flame = document.createElement('div');
      flame.classList.add('flame');
      flame.innerHTML = `
        <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
          <path fill="#FF4500" d="M32 2C20 12 20 30 32 42s12 10 12 18-6 10-12 10-12-6-12-10 4-10 12-18S44 22 32 2z"/>
        </svg>
      `;
      document.body.appendChild(flame);
      setTimeout(() => flame.remove(), 2000);
    }

    function gameOver() {
      localStorage.setItem('quizResults', JSON.stringify({
        score: score,
        total: questions.length,
        details: results
      }));
      window.location.href = 'kalah.html';
    }

    function showQuestion() {
      const questionBox = document.getElementById('questionBox');
      questionBox.innerHTML = '';

      if (currentQuestion < questions.length) {
        const q = questions[currentQuestion];
        // Tampilkan pertanyaan
        const questionEl = document.createElement('h3');
        questionEl.className = 'mb-4';
        questionEl.textContent = q.soal;
        questionBox.appendChild(questionEl);

        // Tampilkan pilihan
        q.pilihan.forEach((option, index) => {
          // Buat tombol opsi
          const btn = document.createElement('button');
          btn.className = 'option-btn';
          btn.innerHTML = `<span class="option-letter">${String.fromCharCode(65 + index)}</span>. ${option}`;

          // Event klik
          btn.addEventListener('click', function() {
            handleAnswer(index, q.jawaban);
          });

          questionBox.appendChild(btn);
        });
      } else {
        // Soal habis -> simpan hasil -> hasil.html
        localStorage.setItem('quizResults', JSON.stringify({
          score: score,
          total: questions.length,
          details: results
        }));
        window.location.href = 'hasil.html';
      }
    }

    function handleAnswer(selectedIndex, correctAnswer) {
      const correctIndex = correctAnswer.charCodeAt(0) - 'A'.charCodeAt(0);
      const isCorrect = (selectedIndex === correctIndex);

      const optionButtons = document.querySelectorAll('.option-btn');
      optionButtons.forEach((btn, idx) => {
        if (idx === correctIndex) {
          btn.style.backgroundColor = 'var(--game-success)';
        } else if (idx === selectedIndex) {
          btn.style.backgroundColor = 'var(--game-danger)';
        }
        btn.disabled = true;
      });

      if (isCorrect) {
        score++;
        streak++;
        document.getElementById('correctSound').play();
        if (streak % 5 === 0) {
          showStreakBonus();
        }
      } else {
        streak = 0;
        lives--;
        document.getElementById('wrongSound').play();
        if (lives <= 0) {
          setTimeout(() => gameOver(), 500);
          return;
        }
      }

      // Simpan detail jawaban
      results.push({
        question: questions[currentQuestion].soal,
        selected: selectedIndex,
        correct: correctIndex,
        isCorrect: isCorrect
      });

      // Update tampilan
      updateStreak();
      updateLivesDisplay();
      updateProgress();

      // Pindah ke soal berikutnya setelah 1 detik
      setTimeout(() => {
        currentQuestion++;
        showQuestion();
      }, 1000);
    }

    function getExtraLife() {
      if (extraLifeClaimed) {
        alert("Anda sudah mendapatkan nyawa ekstra!");
        return;
      }
      window.open("https://www.instagram.com/akun_saya", "_blank");
      alert("Tunggu 30 detik untuk verifikasi follow Instagram...");
      extraLifeClaimed = true;
      setTimeout(() => {
        if (lives < 4) {
          lives++;
          updateLivesDisplay();
          alert("Verifikasi berhasil! Nyawa bertambah 1.");
        }
      }, 30000);
    }

    // Inisialisasi
    updateLivesDisplay();
    showQuestion();
  </script>
</body>
</html>
